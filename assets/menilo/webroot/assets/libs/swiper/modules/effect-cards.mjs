import{c as a}from"../shared/create-shadow.mjs";import{e}from"../shared/effect-init.mjs";import{e as s}from"../shared/effect-target.mjs";import{e as t}from"../shared/effect-virtual-transition-end.mjs";import{g as r}from"../shared/utils.mjs";function o(o){let{swiper:i,extendParams:l,on:n}=o;l({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),e({effect:"cards",swiper:i,on:n,setTranslate:()=>{const{slides:e,activeIndex:t,rtlTranslate:r}=i,o=i.params.cardsEffect,{startTranslate:l,isTouched:n}=i.touchEventsData,d=r?-i.translate:i.translate;for(let c=0;c<e.length;c+=1){const p=e[c],m=p.progress,f=Math.min(Math.max(m,-4),4);let h=p.swiperSlideOffset;i.params.centeredSlides&&!i.params.cssMode&&(i.wrapperEl.style.transform=`translateX(${i.minTranslate()}px)`),i.params.centeredSlides&&i.params.cssMode&&(h-=e[0].swiperSlideOffset);let M=i.params.cssMode?-h-i.translate:-h,u=0;const w=-100*Math.abs(f);let S=1,$=-o.perSlideRotate*f,x=o.perSlideOffset-.75*Math.abs(f);const b=i.virtual&&i.params.virtual.enabled?i.virtual.from+c:c,v=(b===t||b===t-1)&&f>0&&f<1&&(n||i.params.cssMode)&&d<l,y=(b===t||b===t+1)&&f<0&&f>-1&&(n||i.params.cssMode)&&d>l;if(v||y){const a=(1-Math.abs((Math.abs(f)-.5)/.5))**.5;$+=-28*f*a,S+=-.5*a,x+=96*a,u=-25*a*Math.abs(f)+"%"}if(M=f<0?`calc(${M}px ${r?"-":"+"} (${x*Math.abs(f)}%))`:f>0?`calc(${M}px ${r?"-":"+"} (-${x*Math.abs(f)}%))`:`${M}px`,!i.isHorizontal()){const a=u;u=M,M=a}const E=f<0?""+(1+(1-S)*f):""+(1-(1-S)*f),g=`\n        translate3d(${M}, ${u}, ${w}px)\n        rotateZ(${o.rotate?r?-$:$:0}deg)\n        scale(${E})\n      `;if(o.slideShadows){let e=p.querySelector(".swiper-slide-shadow");e||(e=a("cards",p)),e&&(e.style.opacity=Math.min(Math.max((Math.abs(f)-.5)/.5,0),1))}p.style.zIndex=-Math.abs(Math.round(m))+e.length,s(o,p).style.transform=g}},setTransition:a=>{const e=i.slides.map((a=>r(a)));e.forEach((e=>{e.style.transitionDuration=`${a}ms`,e.querySelectorAll(".swiper-slide-shadow").forEach((e=>{e.style.transitionDuration=`${a}ms`}))})),t({swiper:i,duration:a,transformElements:e})},perspective:()=>!0,overwriteParams:()=>({_loopSwapReset:!1,watchSlidesProgress:!0,loopAdditionalSlides:i.params.cardsEffect.rotate?3:2,centeredSlides:!0,virtualTranslate:!i.params.cssMode})})}export{o as default};